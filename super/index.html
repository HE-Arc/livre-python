
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>super() &#8212; Documentation Bibliothèques Python 1.0.0</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="Abstract Base Class (abc)" href="../abc/index.html" />
    <link rel="prev" title="statistics" href="../statistics/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="super">
<span id="super-tutorial"></span><h1><code class="docutils literal notranslate"><span class="pre">super()</span></code><a class="headerlink" href="#super" title="Lien permanent vers ce titre">¶</a></h1>
<p>Par Anthony Fleury <a class="footnote-reference brackets" href="#af" id="id1">1</a></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p>Python est un langage orienté objet et permet donc de gérer des objets via la
mécanique des classes. Qui dit classes dit héritage et c’est en partie ce qui va
nous intéresser dans ce chapitre, car c’est cette notion nous mène à l’utilisation
du mot-clé <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<p>Comme dans d’autres langages de haut niveau, <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> nous permet d’interagir avec la
classe parente depuis une spécialisation de celle-ci.</p>
</div>
<div class="section" id="classes-et-heritage-simple">
<h2>Classes et héritage simple<a class="headerlink" href="#classes-et-heritage-simple" title="Lien permanent vers ce titre">¶</a></h2>
<p>Voici tout d’abord comment créer une classe basique et la spécialiser sans l’utilisation du mot-clé <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Personne</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prenom</span> <span class="o">=</span> <span class="n">prenom</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nom</span> <span class="o">=</span> <span class="n">nom</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">nom</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prenom</span><span class="si">}</span><span class="s2">&quot;</span>


<span class="k">class</span> <span class="nc">Etudiant</span><span class="p">(</span><span class="n">Personne</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="n">domaine</span><span class="p">):</span>
        <span class="n">Personne</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domaine</span> <span class="o">=</span> <span class="n">domaine</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="n">Personne</span><span class="o">.</span><span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parent</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domaine</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Dans cet exemple, nous créons une première classe <cite>Personne</cite> avec deux attributs (<code class="docutils literal notranslate"><span class="pre">prenom</span></code> et <code class="docutils literal notranslate"><span class="pre">nom</span></code>)
ainsi qu’une méthode de conversion en <cite>string</cite> retournant une chaine. La seconde classe nommée <cite>Etudiant</cite>
hérite de <cite>Personne</cite> et dispose d’un attribut supplémentaire <code class="docutils literal notranslate"><span class="pre">domaine</span></code>. Cette dernière redéfinit la
méthode <code class="docutils literal notranslate"><span class="pre">__str__</span></code> afin d’y intégrer son nouvel attribut.</p>
<p>Remarquez l’utilisation directe du nom de la classe parente <cite>Personne</cite> dans les deux méthodes
de la classe <cite>Etudiant</cite>.</p>
<p>Voici maintenant cette même classe en faisant usage de <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Etudiant</span><span class="p">(</span><span class="n">Personne</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">,</span> <span class="n">domaine</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">prenom</span><span class="p">,</span> <span class="n">nom</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">domaine</span> <span class="o">=</span> <span class="n">domaine</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__str__</span><span class="p">()</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">parent</span><span class="si">}</span><span class="s2">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">domaine</span><span class="si">}</span><span class="s2">&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Dans ce cas, l’appel de la classe parente a tout simplement été remplacé par <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<p>L’utilisation de <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> a été faite sans arguments, ceci n’est possible que depuis Python3.
Il aurait également été possible d’écrire <code class="docutils literal notranslate"><span class="pre">super(Etudiant,</span> <span class="pre">self).__init__(prenom,</span> <span class="pre">nom)</span></code>
mais pourquoir se compliquer la vie.</p>
</div>
<div class="section" id="heritage-multiple">
<h2>Héritage multiple<a class="headerlink" href="#heritage-multiple" title="Lien permanent vers ce titre">¶</a></h2>
<p>Tout comme C++, et contrairement à Java ou C#, Python est capable d’utiliser l’héritage multiple.
Ceci implique forcément des particularités au niveau de l’utilisation de cette mécanique qui
peuvent être gérées à l’aide de <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">SousClasse</span><span class="p">(</span><span class="n">Classe1</span><span class="p">,</span> <span class="n">Classe2</span><span class="p">,</span> <span class="n">Classe3</span><span class="p">,</span> <span class="o">...</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Classe héritant de plusieurs classes.&quot;&quot;&quot;</span>
</pre></div>
</td></tr></table></div>
<div class="section" id="diamond-problem">
<h3><em>Diamond Problem</em><a class="headerlink" href="#diamond-problem" title="Lien permanent vers ce titre">¶</a></h3>
<img alt="Diamond Problem UML" class="align-right" src="../_images/diamond.png" />
<p>Le <em>Diamond Problem</em> est un terme généralement utilisé pour représenter les ambiguïtés survenant
lorsque deux classes <cite>B</cite> et <cite>C</cite> héritent d’une superclasse <cite>A</cite> et qu’une quatrième classe <cite>D</cite>
hérite à la fois de <cite>B</cite> et <cite>C</cite>.</p>
<p>Si <cite>A</cite> implémente une certaine méthode qui est elle-même redéfinie dans les classes <cite>B</cite> et/ou <cite>C</cite>,
quelle version de cette méthode sera héritée par la classe <cite>D</cite> ?</p>
<p>Voici un exemple de code illustrant cette fameuse situation :</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis A&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis B&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis C&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">nouveauD</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
<span class="n">nouveauD</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>

<span class="c1"># Sortie : Appel de test depuis B</span>
</pre></div>
</td></tr></table></div>
<p>La réponse dépend de l’ordre dans lequel les classes parentes sont spécifiées lors de l’héritage.</p>
<p><strong>En effet, si B est placée avant C, ce sera alors sa méthode qui est appelée par une instance de D.</strong></p>
<p><em>N.B. Les résultats obtenus peuvent varier selon la version de Python utilisée, mais ils seront tels
qu’indiqués si Python3 est utilisé.</em></p>
</div>
<div class="section" id="utilite-de-super-lors-de-l-heritage-multiple">
<h3>Utilité de <code class="docutils literal notranslate"><span class="pre">super</span></code> lors de l’héritage multiple<a class="headerlink" href="#utilite-de-super-lors-de-l-heritage-multiple" title="Lien permanent vers ce titre">¶</a></h3>
<p>Dans ce premier exemple nous allons retrouver nos quatre classes <cite>A</cite>, <cite>B</cite>, <cite>C</cite> et <cite>D</cite> avec les mêmes
héritages que dans la section précédente (diamond problem). Nous allons observer les différences avec et sans usage
de la méthode <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis A&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis B&quot;</span><span class="p">)</span>
        <span class="n">A</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis C&quot;</span><span class="p">)</span>
        <span class="n">A</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis D&quot;</span><span class="p">)</span>
        <span class="n">B</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">C</span><span class="o">.</span><span class="n">test</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="n">nouveauD</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
<span class="n">nouveauD</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>

<span class="c1"># Sortie :</span>
<span class="c1"># Appel de test depuis D</span>
<span class="c1"># Appel de test depuis B</span>
<span class="c1"># Appel de test depuis A</span>
<span class="c1"># Appel de test depuis C</span>
<span class="c1"># Appel de test depuis A</span>
</pre></div>
</td></tr></table></div>
<p>Nous remarquons alors que la méthode test de la classe <cite>A</cite> est appelée deux fois. Une première fois en remontant
depuis <cite>B</cite> et une seconde fois depuis <cite>C</cite>. Ce comportement n’est pas donc pas idéal, car même si <cite>D</cite> hérite à la fois
de <cite>B</cite> et <cite>C</cite>, la méthode de la classe <cite>A</cite> ne devrait être appelée qu’une seule et unique fois.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis A&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis B&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis C&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Appel de test depuis D&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>


<span class="n">nouveauD</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>
<span class="n">nouveauD</span><span class="o">.</span><span class="n">test</span><span class="p">()</span>

<span class="c1"># Sortie :</span>
<span class="c1"># Appel de test depuis D</span>
<span class="c1"># Appel de test depuis B</span>
<span class="c1"># Appel de test depuis C</span>
<span class="c1"># Appel de test depuis A</span>
</pre></div>
</td></tr></table></div>
<p>Cette fois-ci, le comportement observé est celui que nous désirons, mais pourquoi ?</p>
<p>La méthode <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> va utiliser l’algorithme <abbr title="Method Resolution Order">MRO</abbr> afin de déterminer l’ordre
d’appel le plus adéquat avec le schéma de classe choisi. Ainsi chaque classe aura une sorte de « chemin » jusqu’à son
parent le plus vieux et c’est ce chemin qui permet d’effectuer les bons appels de méthodes. Il est bon de
constater que l’ordre d’héritage passé à <cite>D</cite> est toujours pris en compte.</p>
<p>Remarquez aussi que nous n’avons également plus besoin de passer <code class="docutils literal notranslate"><span class="pre">self</span></code> lors de l’appel de la méthode, car <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>
représente directement les objets parents.</p>
</div>
<div class="section" id="constructeurs-avec-super-et-fonctionnement-de-mro">
<h3>Constructeurs avec super et fonctionnement de MRO<a class="headerlink" href="#constructeurs-avec-super-et-fonctionnement-de-mro" title="Lien permanent vers ce titre">¶</a></h3>
<p>Cette fois-ci, la méthode implémentée est le constructeur de ces mêmes classes. Comme dans les autres langages, il est nécessaire de faire appel au
constructeur du parent dans celui de l’enfant.</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Constructeur de A&quot;</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Constructeur de B&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">C</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Constructeur de C&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">D</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Constructeur de D&quot;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>


<span class="n">nouveauD</span> <span class="o">=</span> <span class="n">D</span><span class="p">()</span>

<span class="c1"># Sortie :</span>
<span class="c1"># Constructeur de D</span>
<span class="c1"># Constructeur de B</span>
<span class="c1"># Constructeur de C</span>
<span class="c1"># Constructeur de A</span>
</pre></div>
</td></tr></table></div>
<p>Le fonctionnement reste équivalent à celui observé auparavant.</p>
<p>Afin de mieux comprendre le fonctionnement <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>, il est possible d’afficher le fameux chemin déterminé par MRO :</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">D</span><span class="o">.</span><span class="vm">__mro__</span>
<span class="go">[&lt;class &#39;super_init.D&#39;&gt;,</span>
<span class="go"> &lt;class &#39;super_init.B&#39;&gt;,</span>
<span class="go"> &lt;class &#39;super_init.C&#39;&gt;,</span>
<span class="go"> &lt;class &#39;super_init.A&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">B</span><span class="o">.</span><span class="vm">__mro__</span>
<span class="go">[&lt;class &#39;super_init.B&#39;&gt;,</span>
<span class="go"> &lt;class &#39;super_init.A&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span><span class="o">.</span><span class="vm">__mro__</span>
<span class="go">[&lt;class &#39;super_init.C&#39;&gt;,</span>
<span class="go"> &lt;class &#39;super_init.A&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">A</span><span class="o">.</span><span class="vm">__mro__</span>
<span class="go">[&lt;class &#39;super_init.A&#39;&gt;,</span>
<span class="go"> &lt;class &#39;object&#39;&gt;]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="points-importants">
<h2>Points importants<a class="headerlink" href="#points-importants" title="Lien permanent vers ce titre">¶</a></h2>
<ul class="simple">
<li><p>Afin que <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> fonctionne correctement en cas d’héritage multiple, il est nécessaire d’y faire appel dans tous les constructeurs de l’arborescence. Sauf éventuellement pour la classe de base (la plus haute), car héritant obligatoirement de <code class="docutils literal notranslate"><span class="pre">object</span></code>, cet appel n’aurait pas d’effet.</p></li>
<li><p>L’utilisation d’arguments différents pour les méthodes surchargées peut poser problème. Dans le cas d’une utilisation conjointe avec le mot-clé <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a>, il faudra utiliser une astuce : les méthodes appelées par <a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> se transmettent leurs arguments à l’aide de tableaux. Ainsi toutes les versions de la méthode ont la même signature.</p></li>
</ul>
<p>Exemple d’utilisation avec des arguments :</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">First</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first_arg</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;first_arg&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Second</span><span class="p">(</span><span class="n">First</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">second_arg</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;second_arg&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">Third</span><span class="p">(</span><span class="n">Second</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">third_arg</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;third_arg&#39;</span><span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>


<span class="n">third</span> <span class="o">=</span> <span class="n">Third</span><span class="p">(</span><span class="n">first_arg</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">second_arg</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">third_arg</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>On utilise <code class="docutils literal notranslate"><span class="pre">kwargs</span></code> afin de récupérer les arguments aux bons endroits à l’aide de leur nom.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> est un outil puissant permettant d’accéder aux parents directs lors d’héritage et de
régler différents problèmes dus à l’héritage multiple.</p>
<p><a class="reference external" href="https://docs.python.org/3/library/functions.html#super" title="(disponible dans Python v3.9)"><code class="xref py py-func docutils literal notranslate"><span class="pre">super()</span></code></a> reste toutefois complexe à maitriser, car son fonctionnement n’est pas toujours intuitif et évident.</p>
<p>Les exemples abordés dans cette documentation ne touchent que la partie visible de l’iceberg, car les choses peuvent
vite devenir compliquées lorsqu’on utilise des arguments différents et des schémas de classe complexes.</p>
<p>Pour aller plus loin: <a class="reference external" href="https://rhettinger.wordpress.com/2011/05/26/super-considered-super/">Python’s super() considered super!</a></p>
<dl class="footnote brackets">
<dt class="label" id="af"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>&lt;<a class="reference external" href="mailto:anthony&#46;fleury&#37;&#52;&#48;he-arc&#46;ch">anthony<span>&#46;</span>fleury<span>&#64;</span>he-arc<span>&#46;</span>ch</a>&gt;</p>
</dd>
</dl>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Bibliothèques Python</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Builtins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../collections/index.html"><code class="docutils literal notranslate"><span class="pre">collections</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../datetime/index.html"><code class="docutils literal notranslate"><span class="pre">datetime</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../dunders/index.html">Dunders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enum/index.html"><code class="docutils literal notranslate"><span class="pre">enum</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fstrings/index.html">f-strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itertools/index.html"><code class="docutils literal notranslate"><span class="pre">itertools</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/index.html"><code class="docutils literal notranslate"><span class="pre">io</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html"><code class="docutils literal notranslate"><span class="pre">math</span></code> / <code class="docutils literal notranslate"><span class="pre">fractions</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../random/index.html"><code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/index.html"><code class="docutils literal notranslate"><span class="pre">time</span></code> / <code class="docutils literal notranslate"><span class="pre">datetime</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../statistics/index.html"><code class="docutils literal notranslate"><span class="pre">statistics</span></code></a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">super()</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abc/index.html">Abstract Base Class (<code class="docutils literal notranslate"><span class="pre">abc</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary/index.html"><code class="docutils literal notranslate"><span class="pre">bytes</span></code> / <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> / <code class="docutils literal notranslate"><span class="pre">memoryview</span></code>, <code class="docutils literal notranslate"><span class="pre">struct</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../bisect/index.html"><code class="docutils literal notranslate"><span class="pre">bisect</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../email/index.html">E-mail (<code class="docutils literal notranslate"><span class="pre">smtplib</span></code> / <code class="docutils literal notranslate"><span class="pre">imaplib</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hashlib/index.html"><code class="docutils literal notranslate"><span class="pre">hashlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../multiprocessing/index.html"><code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../re/index.html">Expressions régulières (<code class="docutils literal notranslate"><span class="pre">re</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secrets/index.html"><code class="docutils literal notranslate"><span class="pre">secrets</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../weakref/index.html"><code class="docutils literal notranslate"><span class="pre">weakref</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../colorama/index.html"><code class="docutils literal notranslate"><span class="pre">colorama</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../invoke/index.html"><code class="docutils literal notranslate"><span class="pre">invoke</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unittest/index.html"><code class="docutils literal notranslate"><span class="pre">unittest</span></code> / <code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytest/index.html"><code class="docutils literal notranslate"><span class="pre">pytest</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../csv/index.html"><code class="docutils literal notranslate"><span class="pre">csv</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../json/index.html"><code class="docutils literal notranslate"><span class="pre">json</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pillow/index.html">Python Imaging Library (<code class="docutils literal notranslate"><span class="pre">PIL</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hug/index.html"><code class="docutils literal notranslate"><span class="pre">hug</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../matplotlib/index.html"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../networkx/index.html"><code class="docutils literal notranslate"><span class="pre">networkx</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pycrypto/index.html"><code class="docutils literal notranslate"><span class="pre">pycrypto</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pygame/index.html"><code class="docutils literal notranslate"><span class="pre">pygame</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/index.html"><code class="docutils literal notranslate"><span class="pre">sphinx</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html"><code class="docutils literal notranslate"><span class="pre">watchdog</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pbr/index.html"><cite>⚙️Automate your publishing to PyPI with PBR and Travis</cite></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/about.html">À propos de ce livre</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contrib.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licence.html">Creative Commons Attribution-ShareAlike 4.0 International</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../statistics/index.html" title="Chapitre précédent"><code class="docutils literal notranslate"><span class="pre">statistics</span></code></a></li>
      <li>Next: <a href="../abc/index.html" title="Chapitre suivant">Abstract Base Class (<code class="docutils literal notranslate"><span class="pre">abc</span></code>)</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2017, HE-Arc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/super/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>