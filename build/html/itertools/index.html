<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="fr">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>itertools &#8212; Bibliothèques Python 0.1.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="invoke" href="../invoke/index.html" />
    <link rel="prev" title="io" href="../io/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="itertools">
<span id="itertools-tutorial"></span><h1><code class="docutils literal"><span class="pre">itertools</span></code><a class="headerlink" href="#itertools" title="Permalink to this headline">¶</a></h1>
<p>Par Johnny Da Costa <a class="footnote-reference" href="#jd" id="id1">[1]</a></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Le module itertools de Python nous propose un bon nombre de générateurs prêts à l&#8217;emploi. Qu&#8217;est-ce qu&#8217;un générateur ou un itérateur ? Pour comprendre ça, nous allons utiliser un exemple très simple. Imaginez que vous avez une liste et que vous voulez l&#8217;afficher. La première chose qui nous vient en tête est d&#8217;utiliser une boucle.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">liste</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;do&quot;</span> <span class="s2">&quot;love&quot;</span><span class="p">,</span> <span class="s2">&quot;programming&quot;</span><span class="p">,</span> <span class="s2">&quot;in&quot;</span><span class="p">,</span> <span class="s2">&quot;python&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">liste</span><span class="p">:</span>
<span class="go">    print(i)</span>
<span class="go">I</span>
<span class="go">do</span>
<span class="go">love</span>
<span class="go">programming</span>
<span class="go">in</span>
<span class="go">python</span>
</pre></div>
</div>
<p>Derrière cette boucle <strong>for</strong> se cache enfet un itérateur. C&#8217;est un objet qui va être chargé de parcourir un objet conteneur, dans  notre cas notre liste. Quand Python va tomber sur la ligne <strong>for i in liste:</strong>, il va appeler l&#8217;itérateur de notre liste pour pouvoir la parcourir. L&#8217;itérateur se crée dans la méthode <strong>__iter__</strong> de notre objet liste dans notre cas. Et lui va nous retourner notre itérateur pour pouvoir parcourir notre petit liste.</p>
<p>A chaque itération python va appeler la méthode <strong>__next__</strong> de notre liste pour itérer à l&#8217;élément suivant ou s&#8217;arrêter avec l&#8217;execption <strong>StopIteration</strong> si le parcours à fini de parcour la liste.</p>
<p>Voici un autre exemple mais avec une chaine string.</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chaine</span> <span class="o">=</span> <span class="s2">&quot;Python&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterateur</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">chaine</span><span class="p">)</span> <span class="c1"># va nous retourner un itérateur sur notre chaine</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="nb">next</span><span class="p">(</span><span class="n">iterateur</span><span class="p">))</span> <span class="c1"># va nous afficher la première lettre de notre string</span>
<span class="go">P</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">iterateur</span><span class="p">:</span> <span class="c1"># va parcourir tous les caractères un à un</span>
<span class="go">    print(i)</span>
<span class="go">y</span>
<span class="go">t</span>
<span class="go">h</span>
<span class="go">o</span>
<span class="go">n</span>
</pre></div>
</div>
<p>On voit que le <strong>P</strong> à déjà été consommé lors de l&#8217;appel à la fonction <strong>next(iterateur)</strong></p>
</div>
<div class="section" id="iterateurs-offert-par-python">
<h2>Itérateurs offert par Python<a class="headerlink" href="#iterateurs-offert-par-python" title="Permalink to this headline">¶</a></h2>
<p>Python nous offres des <a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#module-itertools" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">itertools</span></code></a> qui sont des itérateurs qui nous permette d&#8217;itérer sur nous objets. Voici une petit liste non-exaustif de ce que nous propose se module :</p>
<ul class="simple">
<li><a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#itertools.count" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">itertools.count()</span></code></a> : crée un itérateur qui va nous retourner des valeurs espacé de par 1 défault. Attention boucle inifni.</li>
<li><a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#itertools.repeat" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">itertools.repeat()</span></code></a> : va nous répeter les éléments n fois.</li>
<li><a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#itertools.chain" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">itertools.chain()</span></code></a> : permet de concaténer des listes, chaine de caractère, etc...</li>
<li><a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#itertools.filterfalse" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">itertools.filterfalse()</span></code></a> : créer un itérateur qui va filtrer les éléments qui sont itérable et nous retourner seulement ceux qui réponde faux à notre prédicat</li>
<li>todo : mettre encore deux trois itertools...</li>
</ul>
<p>La liste est encore longue et le but ici n&#8217;est pas de voir chaque <a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#module-itertools" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">itertools</span></code></a> mais de comprendre le concept d&#8217;iterateur. Rien de mieux que pour comprendre ce que sont les itérateur que de créer le notre.</p>
</div>
<div class="section" id="nos-itertools-perso">
<h2>Nos <a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#module-itertools" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">itertools</span></code></a> perso<a class="headerlink" href="#nos-itertools-perso" title="Permalink to this headline">¶</a></h2>
<p>Nous allons ici créer une classe qui va nous retourner un itérateur qui va parcouir un liste de la fin jusqu&#8217;au début.</p>
<p>Exemple inspiré de la documentation Python : <a class="reference external" href="https://docs.python.org/3/tutorial/classes.html#iterators">Python3Doc</a></p>
<ul class="simple">
<li>Première étape nous allons créer notre class qui va nous retourner un itérateur</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>

<span class="k">class</span> <span class="nc">itRevListe</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Nous retourne un itérateur.</span>

<span class="sd">    Ce qui nous permettra de parcourir notre liste de la fin jusqu&#39;au début.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">liste</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;On va se mettre à la fin de notre liste.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">liste</span> <span class="o">=</span> <span class="n">liste</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">liste</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__next__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;On renvoie l&#39;élément suivant dans notre liste.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">position</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">liste</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">position</span><span class="p">]</span>
</pre></div>
</div>
<ul class="simple">
<li>Deuxième étape remplacer l&#8217;itérateur de l&#8217;objet liste par le notre.</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span>

<span class="k">class</span> <span class="nc">revList</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    On va reprendre les méthodes et attributs de la class list.</span>

<span class="sd">    Mais nous allons lui changer son itérateur par le notre.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Renvoie notre iterateur perso.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">itRevListe</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>troisième étape utiliser notre itertools perso!</li>
</ul>
</div>
<div class="section" id="les-generateurs">
<h2>Les générateurs<a class="headerlink" href="#les-generateurs" title="Permalink to this headline">¶</a></h2>
<p>Les générateurs et les itérateurs sont intimement liés. Pour faire simple, un générateur est une fonction construite à l&#8217;aide
du mot clef <strong>yield</strong>. Mais contrairement aux fonctions habituelles, elle n&#8217;a pas de <strong>return</strong>, mais ou plusieurs <strong>yield</strong>.</p>
<p>Un petit exemple simple :</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">say_hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="go">        yield &quot;Bienvenue, &quot;</span>
<span class="go">        yield                # return none</span>
<span class="go">        yield name</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="ow">in</span> <span class="n">say_hello</span><span class="p">(</span><span class="s2">&quot;Johnny&quot;</span><span class="p">):</span>
<span class="go">    print(i)</span>
<span class="go">&quot;Bienvenue,&quot;</span>
<span class="go">None</span>
<span class="go">&quot;Johnny&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="exemple-de-generateur-fibonacci">
<h2>Exemple de générateur <strong>fibonacci</strong><a class="headerlink" href="#exemple-de-generateur-fibonacci" title="Permalink to this headline">¶</a></h2>
<p>D&#8217;après l&#8217;exemple de <a class="reference external" href="https://zestedesavoir.com/tutoriels/954/notions-de-python-avancees/5-generators/">zeste de savoir</a></p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fibonacci</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">a</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="go">     for _ in range(n):</span>
<span class="go">         yield a</span>
<span class="go">         a, b = b, a + b</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">10</span><span class="p">))</span>
<span class="go">[0, 1, 1, 2, 3, 5, 8, 13, 21, 34]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">fibonacci</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">))</span>
<span class="go">[6, 7, 13, 20, 33]</span>
</pre></div>
</div>
</div>
<div class="section" id="exemple-d-utilisations-d-itertools">
<h2>Exemple d&#8217;utilisations d&#8217;<a class="reference external" href="https://docs.python.org/3.6/library/itertools.html#module-itertools" title="(in Python v3.6)"><code class="xref py py-mod docutils literal"><span class="pre">itertools</span></code></a><a class="headerlink" href="#exemple-d-utilisations-d-itertools" title="Permalink to this headline">¶</a></h2>
<p>Essayons maintenant de résoudre un problème avec les itertools que Pythons nous offre. Imaginons que nous avons une liste de point qui formerai un chemin dont on aimerai connaitre la distance.</p>
<p>Objectif :</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chemin</span> <span class="o">=</span> <span class="p">[</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pairs</span> <span class="o">=</span> <span class="p">[(</span><span class="n">A</span><span class="p">,</span> <span class="n">B</span><span class="p">),</span> <span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">C</span><span class="p">),</span> <span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">A</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distances</span> <span class="o">=</span> <span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">B</span> <span class="o">-</span> <span class="n">A</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">C</span> <span class="o">-</span> <span class="n">B</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span> <span class="o">-</span> <span class="n">C</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
</pre></div>
</div>
<p>Voici nos fonctions :</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">pairs</span><span class="p">(</span><span class="n">lst</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Pairs(&quot;abc&quot;) --&gt; [(a,b), (b,c), (c,a)].&quot;&quot;&quot;</span>
    <span class="n">i</span> <span class="o">=</span> <span class="n">cycle</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">lst</span><span class="p">,</span> <span class="n">i</span><span class="p">))</span>


<span class="k">def</span> <span class="nf">getDistance</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Retourne la distance entre chaque pairs.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="n">chain</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">))))</span>
</pre></div>
</div>
<p>Sortie :</p>
<div class="highlight-pycon"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">chemin</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="mi">223</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">steps</span> <span class="o">=</span> <span class="n">pairs</span><span class="p">(</span><span class="n">chemin</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
<span class="go">[(5, 3), (3, 23), (23, 223), (223, 5)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distances</span> <span class="o">=</span> <span class="n">getDistance</span><span class="p">(</span><span class="n">steps</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
<span class="go">[-2, 20, 200, -218]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">distance</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">distances</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="n">distance</span><span class="p">)</span>
<span class="go">0</span>
</pre></div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>Itertools est un module permettant de faire des choses simpas avec cet objet qu&#8217;est l&#8217;itérateur. Ces itérateurs sont vraiment utile et important que Python a dédié un module pour les opérations d&#8217;itération qui sont les itertools.</p>
<table class="docutils footnote" frame="void" id="jd" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>&lt;<a class="reference external" href="mailto:johnny&#46;dacosta&#37;&#52;&#48;he-arc&#46;ch">johnny<span>&#46;</span>dacosta<span>&#64;</span>he-arc<span>&#46;</span>ch</a>&gt;</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">itertools</span></code></a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#iterateurs-offert-par-python">Itérateurs offert par Python</a></li>
<li><a class="reference internal" href="#nos-itertools-perso">Nos <code class="docutils literal"><span class="pre">itertools</span></code> perso</a></li>
<li><a class="reference internal" href="#les-generateurs">Les générateurs</a></li>
<li><a class="reference internal" href="#exemple-de-generateur-fibonacci">Exemple de générateur <strong>fibonacci</strong></a></li>
<li><a class="reference internal" href="#exemple-d-utilisations-d-itertools">Exemple d&#8217;utilisations d&#8217;<code class="docutils literal"><span class="pre">itertools</span></code></a></li>
<li><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../io/index.html" title="Chapitre précédent">io</a></li>
      <li>Next: <a href="../invoke/index.html" title="Chapitre suivant">invoke</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>Cette page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/itertools/index.rst.txt"
            rel="nofollow">Montrer le code source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Recherche rapide</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2017, HE-Arc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.9</a>
      
      |
      <a href="../_sources/itertools/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>