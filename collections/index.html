
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>collections &#8212; Documentation Bibliothèques Python 1.0.0</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="datetime" href="../datetime/index.html" />
    <link rel="prev" title="Builtins" href="../builtins/index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="collections">
<span id="collections-tutorial"></span><h1><code class="docutils literal notranslate"><span class="pre">collections</span></code><a class="headerlink" href="#collections" title="Lien permanent vers ce titre">¶</a></h1>
<p>Par Cédric Pahud <a class="footnote-reference brackets" href="#cp" id="id1">1</a></p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/collections.html#module-collections" title="(disponible dans Python v3.9)"><code class="xref py py-mod docutils literal notranslate"><span class="pre">collections</span></code></a> contient des conteneurs de données spécialisés qui offrent une alternative aux conteneurs généraux de python.
Ces conteneurs vont souvent plus loin que les conteneurs de données <em>built-in</em> et ont des fonctionnalités plus avancées que nous allons voir ici.</p>
<p>Voici donc les conteneurs dont nous allons parler:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 86%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Conteneur</p></th>
<th class="head"><p>Utilité</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>namedtuple()</p></td>
<td><p>une fonction permettant de créer une sous-classe de tuple avec des champs nommés</p></td>
</tr>
<tr class="row-odd"><td><p>deque</p></td>
<td><p>un conteneur ressemblant a une liste mais avec ajout et suppression rapide a chacun des bouts</p></td>
</tr>
<tr class="row-even"><td><p>ChainMap</p></td>
<td><p>permet de linker entre eux plusieurs mappings ensemble pour les gérer comme un tout</p></td>
</tr>
<tr class="row-odd"><td><p>Counter</p></td>
<td><p>Permet de compter les occurences d’objets hachable</p></td>
</tr>
<tr class="row-even"><td><p>OrderedDict</p></td>
<td><p>une sous classe de dictionnaire permettant de savoir l’ordre des entrées</p></td>
</tr>
<tr class="row-odd"><td><p>defaultdict</p></td>
<td><p>une sous classe de dictionnaire permettant de spécifier une valeur par défaut dans le constructeur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="namedtuple">
<h2>namedtuple()<a class="headerlink" href="#namedtuple" title="Lien permanent vers ce titre">¶</a></h2>
<p>tout d’abord avant d’utiliser la fonction <code class="docutils literal notranslate"><span class="pre">namedtuple()</span></code> il faut comprendre ce qu’est un tuple.
un tuple est une collection immuable de données souvent hétérogène.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;cheval&quot;</span><span class="p">,</span> <span class="s2">&quot;voiture&quot;</span><span class="p">,</span> <span class="s2">&quot;bateau&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span>
<span class="go">(&#39;cheval&#39;, &#39;voiture&#39;, &#39;bateau&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;cheval&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;voiture&#39;</span>
</pre></div>
</div>
<p>ci-dessus on remarque qu’on peut atteindre les champs de notre tuple seulement en spécifiant son index.
En utilisant la fonction <code class="docutils literal notranslate"><span class="pre">namedtuple()</span></code> pour créer notre tuple, on peut nommer ses champs.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>     <span class="c1"># instanciation par position ou en utilisant le nom du champs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>             <span class="c1"># indexable comme les tuples de base (11, 22)</span>
<span class="go">33</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">p</span>                <span class="c1"># on peut le diviser en plusieurs variables (comme un tuple normal)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="go">(11, 22)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">p</span><span class="o">.</span><span class="n">y</span>               <span class="c1"># les champs sont accessibles par nom</span>
<span class="go">33</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span>                       <span class="c1"># lisible dans un style nom=valeur</span>
<span class="go">Point(x=11, y=22)</span>
</pre></div>
</div>
<div class="section" id="quelques-fonctions">
<h3>quelques fonctions<a class="headerlink" href="#quelques-fonctions" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="mytuple-make-iterable">
<h4>mytuple._make(iterable)<a class="headerlink" href="#mytuple-make-iterable" title="Lien permanent vers ce titre">¶</a></h4>
<p>cette fonction permet de créer un tuple a partir d’un objet <em>iterable</em>.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">t</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="p">(</span><span class="o">*</span><span class="n">t</span><span class="p">)</span>
<span class="go">Point(11, 12)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Point</span><span class="o">.</span><span class="n">_make</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
<span class="go">Point(x=11, y=22)</span>
</pre></div>
</div>
</div>
<div class="section" id="mytuple-asdict">
<h4>mytuple._asdict()<a class="headerlink" href="#mytuple-asdict" title="Lien permanent vers ce titre">¶</a></h4>
<p>cette fonction retourne un nouveau OrderedDict qui <em>map</em> les noms de champs avec leurs valeurs.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_asdict</span><span class="p">()</span>
<span class="go">OrderedDict([(&#39;x&#39;, 11), (&#39;y&#39;, 22)])</span>
</pre></div>
</div>
</div>
<div class="section" id="mytuple-replace-key-args">
<h4>mytuple._replace(key=args)<a class="headerlink" href="#mytuple-replace-key-args" title="Lien permanent vers ce titre">¶</a></h4>
<p>cette fonction permet de retourner une nouvelle instance de notre tuple avec une valeures modifiée.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_replace</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">33</span><span class="p">)</span>
<span class="go">Point(x=33, y=22)</span>
</pre></div>
</div>
</div>
<div class="section" id="mytuple-fields">
<h4>mytuple._fields<a class="headerlink" href="#mytuple-fields" title="Lien permanent vers ce titre">¶</a></h4>
<p>cette fonction permet de récupérer les noms des champs de notre tuple.
elle est utile si on veut créer un nouveau tuple avec les champs d’un tuple existant.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p</span><span class="o">.</span><span class="n">_fields</span>            <span class="c1"># retourne les noms de champs</span>
<span class="go">(&#39;x&#39;, &#39;y&#39;)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Color</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Color&#39;</span><span class="p">,</span> <span class="s1">&#39;red green blue&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pixel</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">&#39;Pixel&#39;</span><span class="p">,</span> <span class="n">Point</span><span class="o">.</span><span class="n">_fields</span> <span class="o">+</span> <span class="n">Color</span><span class="o">.</span><span class="n">_fields</span><span class="p">)</span> <span class="c1">#on créé un nouveau tuple avec les champs de point et de color</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Pixel</span><span class="p">(</span><span class="mi">11</span><span class="p">,</span> <span class="mi">22</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="go">Pixel(x=11, y=22, red=128, green=255, blue=0)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="deque">
<h2>deque<a class="headerlink" href="#deque" title="Lien permanent vers ce titre">¶</a></h2>
<p>la classe <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.deque" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.deque</span></code></a> est une généralisation des liste et des piles. les deque sont thread-safe et supporte l’ajout d’une
valeur de chaque côté <em>(pile, liste)</em>. La preformance lors de l’ajout d’une valeur peut importe le côté
est de O(1). Même si les objets de type <em>list</em> supportent des opérations similaires elles sont plus optimisées
pour des opérations qui ne change pas leur taille alors qu” un <code class="docutils literal notranslate"><span class="pre">pop()</span></code> ou un <code class="docutils literal notranslate"><span class="pre">insert()</span></code> ont une complexité O(n).</p>
<p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">collections.deque([iterable[,</span> <span class="pre">maxlen]])</span></code> cette instruction retourne un deque contenant les valeurs de
<code class="docutils literal notranslate"><span class="pre">iterable</span></code> (s’il n’est pas spécifié le deque est vide) et l’argument <code class="docutils literal notranslate"><span class="pre">maxlen</span></code> permet de spécifier une taille
maximum (la taille n’a pas de limite s’il nes pas spécifié).</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">deque</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>                 <span class="c1"># créé un nouveau deque avec 3 valeurs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">elem</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>                   <span class="c1"># itères sur les éléments de notre deque</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="n">elem</span><span class="p">)</span>
<span class="go">a</span>
<span class="go">b</span>
<span class="go">c</span>
</pre></div>
</div>
<div class="section" id="id3">
<h3>quelques fonctions<a class="headerlink" href="#id3" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="append-x-appendleft-x-extend-iterable-et-extendleft-iterable">
<h4>append(x), appendleft(x), extend(iterable) et extendleft(iterable)<a class="headerlink" href="#append-x-appendleft-x-extend-iterable-et-extendleft-iterable" title="Lien permanent vers ce titre">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">append</span></code> ajoute une seule valeure du côté droit du deque et <code class="docutils literal notranslate"><span class="pre">appendleft</span></code> du côté gauche
alors que <code class="docutils literal notranslate"><span class="pre">extend</span></code> et <code class="docutils literal notranslate"><span class="pre">extendleft</span></code> permettent d’ajouer plusieurs éléments d’un coup.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">appendleft</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">deque([&#39;r&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;z&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s1">&#39;jkl&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">deque([&#39;r&#39;, &#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;z&#39;,&#39;j&#39;,&#39;k&#39;,&#39;l&#39;])</span>
</pre></div>
</div>
</div>
<div class="section" id="pop-popleft-remove-val-et-clear">
<h4>pop(), popleft(), remove(val) et clear()<a class="headerlink" href="#pop-popleft-remove-val-et-clear" title="Lien permanent vers ce titre">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">pop</span></code> et <code class="docutils literal notranslate"><span class="pre">popleft</span></code> permettent de faire sortire un objet de notre deque alors que
<code class="docutils literal notranslate"><span class="pre">remove</span></code> supprime la première occurence de la val passée en paramètre et finalement
<code class="docutils literal notranslate"><span class="pre">clear</span></code> vide le deque.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">extends</span><span class="p">(</span><span class="s1">&#39;abc&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span>
<span class="go">deque([&#39;a&#39;, &#39;c&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="go">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">popleft</span><span class="p">()</span>
<span class="go">&#39;a&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="chainmap">
<h2>ChainMap<a class="headerlink" href="#chainmap" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.ChainMap" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.ChainMap</span></code></a> permet de linker plusieurs mappings pour qu’ils soient géré comme un seul. C’est
souvent plus rapide que de créer un nouveau dictionnaire et faire plusieurs <code class="docutils literal notranslate"><span class="pre">update()</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">collections.ChainMap(*maps)</span></code> cette fonction nous retourne une nouvelle ChainMap.
Si il n’y a pas de maps spécifiés en paramètres la ChainMap sera vide.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">ChainMap</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;a&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;b&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">:</span> <span class="mi">11</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">ChainMap</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">z</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="go">      print(k, v)</span>
<span class="go">a 1</span>
<span class="go">c 11</span>
<span class="go">b 10</span>
</pre></div>
</div>
<p>Dans cet exemple on remarque que la clé b a pris la valeur 10 et pas 2 car
<code class="docutils literal notranslate"><span class="pre">y</span></code> est passé avant <code class="docutils literal notranslate"><span class="pre">x</span></code> dans le constructeur de ChainMap.</p>
</div>
<div class="section" id="counter">
<h2>Counter<a class="headerlink" href="#counter" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.Counter" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.Counter</span></code></a> est une sous classe de <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.
qui permet de compter des objets <em>hachable</em>. En fait c’est un dictionnaire avec comme clé les
éléments et comme valeurs leur nombre.</p>
<p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">collections.Counter([iterable-or-mapping])</span></code> ceci nous retourne un Counter. L’argument
permet de spécifier ce que l’on veut mettre dedans et qui doit être compté. Voici un exemple :</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>                           <span class="c1"># compteur vide</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;gallahad&#39;</span><span class="p">)</span>                 <span class="c1">#compteur avec un iterable</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">({</span><span class="s1">&#39;red&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>      <span class="c1"># un compteur avec un mapping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">cats</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dogs</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>             <span class="c1">#un compteur avec key=valeur</span>
</pre></div>
</div>
<p>Contrairement à un dictionnaire si on demande une valeur n’étant pas dans notre liste
il retourne 0 et non pas <code class="docutils literal notranslate"><span class="pre">KeyError</span></code></p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">([</span><span class="s1">&#39;eggs&#39;</span><span class="p">,</span> <span class="s1">&#39;ham&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;bacon&#39;</span><span class="p">]</span>                              <span class="c1"># clé inconnue</span>
<span class="go">0</span>
</pre></div>
</div>
<div class="section" id="id4">
<h3>quelques fonctions<a class="headerlink" href="#id4" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="elements">
<h4>elements()<a class="headerlink" href="#elements" title="Lien permanent vers ce titre">¶</a></h4>
<p>retourne une liste de tous les éléments du compteur :</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">elements</span><span class="p">())</span>
<span class="go">[&#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;a&#39;, &#39;b&#39;, &#39;b&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="most-common-n">
<h4>most_common([n])<a class="headerlink" href="#most-common-n" title="Lien permanent vers ce titre">¶</a></h4>
<p>retourne les n éléments les plus présents dans notre compteur :</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;abracadabra&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">[(&#39;a&#39;, 5), (&#39;r&#39;, 2), (&#39;b&#39;, 2)]</span>
</pre></div>
</div>
</div>
<div class="section" id="substract-iterable-or-mapping">
<h4>substract([iterable or mapping])<a class="headerlink" href="#substract-iterable-or-mapping" title="Lien permanent vers ce titre">¶</a></h4>
<p>permet de soustraire des éléments d’un compteur (mais pas de les supprimer) :</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="o">=-</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">d</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">subtract</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">Counter({&#39;a&#39;: 3, &#39;b&#39;: 0, &#39;c&#39;: -3, &#39;d&#39;: -6})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="ordereddict">
<h2>OrderedDict<a class="headerlink" href="#ordereddict" title="Lien permanent vers ce titre">¶</a></h2>
<p>les <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.OrderedDict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.OrderedDict</span></code></a> sont comme les <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.
mais ils se rappelent l’ordre d’entrée des valeurs. Si on itère dessus les données seront
retournées dans l’ordre d’ajout dans notre dict.</p>
<p><code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">collections.OrderedDict([items])</span></code> cette fonction nous retourn un OrderedDict.</p>
<div class="section" id="quelques-methodes">
<h3>Quelques méthodes<a class="headerlink" href="#quelques-methodes" title="Lien permanent vers ce titre">¶</a></h3>
<div class="section" id="popitem-last-true">
<h4>popitem(last=True)<a class="headerlink" href="#popitem-last-true" title="Lien permanent vers ce titre">¶</a></h4>
<p>Cette fonction fait sortir une paire clé valeur de notre dictionnaire et si
l’argument last est a <code class="docutils literal notranslate"><span class="pre">`True</span></code> alors les pairs seront retournée en LIFO sinon
ce serra en FIFO.</p>
</div>
<div class="section" id="move-to-end-key-last-true">
<h4>move_to_end(key, last=True)<a class="headerlink" href="#move-to-end-key-last-true" title="Lien permanent vers ce titre">¶</a></h4>
<p>Cette fonction permet de déplacer une clé à la fin de notre dictionnaire si
last est à <code class="docutils literal notranslate"><span class="pre">True</span></code> sinon au début de notre dict.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">OrderedDict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="s1">&#39;abcde&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">&#39;acdeb&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span><span class="o">.</span><span class="n">move_to_end</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="n">last</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="go">&#39;bacde&#39;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="defaultdict">
<h2>defaultdict<a class="headerlink" href="#defaultdict" title="Lien permanent vers ce titre">¶</a></h2>
<p>La classe <a class="reference external" href="https://docs.python.org/3/library/collections.html#collections.defaultdict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">collections.defaultdict</span></code></a> est une sous classe de <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.
Elle ajoute une variable et une fonction à la classe <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.
<code class="docutils literal notranslate"><span class="pre">class</span> <span class="pre">collections.defaultdict([default_factory[,</span> <span class="pre">...]])</span></code> cette commande nous retourne un objet
de type defaultdict.L’argument <code class="docutils literal notranslate"><span class="pre">default_factory</span></code> est par défaut à <code class="docutils literal notranslate"><span class="pre">None</span></code> et les reste des arguments
sont traité comme si on utilisait le constructeur de dict.</p>
<p>La fonction ajoutée par defaultdict est <code class="docutils literal notranslate"><span class="pre">__missing(key)__</span></code> elle est appelée par <code class="docutils literal notranslate"><span class="pre">__getitem()__</span></code> de la
classe <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a>.</p>
<p>l’argument <code class="docutils literal notranslate"><span class="pre">default_factory</span></code> permet de spécifier quelle structure de données va correspondre
à une clé dans notre defaultdict. Voici 2 exemples pour mieux comprendre:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;blue&#39;, [2, 4]), (&#39;red&#39;, [1]), (&#39;yellow&#39;, [1, 3])]</span>
</pre></div>
</div>
<p>Dans cette exemple on initialise <code class="docutils literal notranslate"><span class="pre">default_factory</span></code> comme une <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(disponible dans Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> ce qui nous permet d’utiliser
<code class="docutils literal notranslate"><span class="pre">append()</span></code> pour ajouter des éléments à la liste correspondant à une clé donnée.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s1">&#39;mississippi&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">sorted</span><span class="p">(</span><span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;i&#39;, 4), (&#39;m&#39;, 1), (&#39;p&#39;, 2), (&#39;s&#39;, 4)]</span>
</pre></div>
</div>
<p>Dans cet exemple on va utiliser un int au lieu d’une liste et notre defaultdict
va s’utiliser comme un compteur.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Lien permanent vers ce titre">¶</a></h2>
<p>Chacun des conteneurs vu dans ce tutoriel a une utilité bien définie alors choisissez
sagement votre conteneur en fonction de votre problème pour vous simplifier la vie.</p>
<blockquote>
<div><p><em>Choisir Sagement ton conteneur tu dois !</em></p>
<p class="attribution">—Maître Yoda</p>
</div></blockquote>
<dl class="footnote brackets">
<dt class="label" id="cp"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>&lt;<a class="reference external" href="mailto:cedric&#46;pahud&#37;&#52;&#48;he-arc&#46;ch">cedric<span>&#46;</span>pahud<span>&#64;</span>he-arc<span>&#46;</span>ch</a>&gt;</p>
</dd>
</dl>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Bibliothèques Python</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../builtins/index.html">Builtins</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">collections</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../datetime/index.html"><code class="docutils literal notranslate"><span class="pre">datetime</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../dunders/index.html">Dunders</a></li>
<li class="toctree-l1"><a class="reference internal" href="../enum/index.html"><code class="docutils literal notranslate"><span class="pre">enum</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../fstrings/index.html">f-strings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../itertools/index.html"><code class="docutils literal notranslate"><span class="pre">itertools</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/index.html"><code class="docutils literal notranslate"><span class="pre">io</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../math/index.html"><code class="docutils literal notranslate"><span class="pre">math</span></code> / <code class="docutils literal notranslate"><span class="pre">fractions</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../random/index.html"><code class="docutils literal notranslate"><span class="pre">random</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../time/index.html"><code class="docutils literal notranslate"><span class="pre">time</span></code> / <code class="docutils literal notranslate"><span class="pre">datetime</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../statistics/index.html"><code class="docutils literal notranslate"><span class="pre">statistics</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../super/index.html"><code class="docutils literal notranslate"><span class="pre">super()</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../abc/index.html">Abstract Base Class (<code class="docutils literal notranslate"><span class="pre">abc</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../binary/index.html"><code class="docutils literal notranslate"><span class="pre">bytes</span></code> / <code class="docutils literal notranslate"><span class="pre">bytearray</span></code> / <code class="docutils literal notranslate"><span class="pre">memoryview</span></code>, <code class="docutils literal notranslate"><span class="pre">struct</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../bisect/index.html"><code class="docutils literal notranslate"><span class="pre">bisect</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../email/index.html">E-mail (<code class="docutils literal notranslate"><span class="pre">smtplib</span></code> / <code class="docutils literal notranslate"><span class="pre">imaplib</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hashlib/index.html"><code class="docutils literal notranslate"><span class="pre">hashlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../multiprocessing/index.html"><code class="docutils literal notranslate"><span class="pre">multiprocessing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../re/index.html">Expressions régulières (<code class="docutils literal notranslate"><span class="pre">re</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../secrets/index.html"><code class="docutils literal notranslate"><span class="pre">secrets</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../weakref/index.html"><code class="docutils literal notranslate"><span class="pre">weakref</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../colorama/index.html"><code class="docutils literal notranslate"><span class="pre">colorama</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../invoke/index.html"><code class="docutils literal notranslate"><span class="pre">invoke</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unittest/index.html"><code class="docutils literal notranslate"><span class="pre">unittest</span></code> / <code class="docutils literal notranslate"><span class="pre">doctest</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pytest/index.html"><code class="docutils literal notranslate"><span class="pre">pytest</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../csv/index.html"><code class="docutils literal notranslate"><span class="pre">csv</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../json/index.html"><code class="docutils literal notranslate"><span class="pre">json</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pillow/index.html">Python Imaging Library (<code class="docutils literal notranslate"><span class="pre">PIL</span></code>)</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../hug/index.html"><code class="docutils literal notranslate"><span class="pre">hug</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../matplotlib/index.html"><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../networkx/index.html"><code class="docutils literal notranslate"><span class="pre">networkx</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pycrypto/index.html"><code class="docutils literal notranslate"><span class="pre">pycrypto</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../pygame/index.html"><code class="docutils literal notranslate"><span class="pre">pygame</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../sphinx/index.html"><code class="docutils literal notranslate"><span class="pre">sphinx</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../watchdog/index.html"><code class="docutils literal notranslate"><span class="pre">watchdog</span></code></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../pbr/index.html"><cite>⚙️Automate your publishing to PyPI with PBR and Travis</cite></a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/about.html">À propos de ce livre</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/contrib.html">Contribution</a></li>
<li class="toctree-l1"><a class="reference internal" href="../licence.html">Creative Commons Attribution-ShareAlike 4.0 International</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="../builtins/index.html" title="Chapitre précédent">Builtins</a></li>
      <li>Next: <a href="../datetime/index.html" title="Chapitre suivant"><code class="docutils literal notranslate"><span class="pre">datetime</span></code></a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016-2017, HE-Arc.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/collections/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>